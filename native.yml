---
- hosts: all
  connection: local
  gather_facts: true
  become: yes

  vars:
    ansible_python_interpreter: /usr/bin/python3
    bundle_version: ''
    oblac_drives_version: 'latest'
    motion_master_version: ''
    motion_master_bridge_version: 'latest'
    ethercat_interface: 'eth0'

  pre_tasks:
  - name: Remove cdrom sources from /etc/apt/sources.list
    lineinfile:
      path: /etc/apt/sources.list
      regexp: '^deb cdrom'
      state: absent

  - name: Create the oblac-drives directory
    file:
      path: /opt/oblac-drives
      state: directory

  roles:
    - dependencies
    - ethercat-master
    - odb
    - docker
    - motion-master-bridge
    - oblac-drives
    - motion-master
    - services
    - util
